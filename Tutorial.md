# Hands-on Phase Tutorial

This tutorial will be a loose guide to reduce the pain of using the git command line for the first time. This requires you to have at least another person to work with. The fictitious setup is to move an existing project into version control (git) and further develop it with your friends / colleagues.

## Pick a Project

We provide the following sample projects for you to work with Git:

 - A Python application `sample_game.zip`
 - A LaTeX Document `sample_report.zip`

Pick one based on your skills. And we can proceed.

## 1. Moving Into Version Control

> [!NOTE]
> Only one person in the team must do this part. The others team members can read ahead and / o give instructions while enjoying their drink.

### Get the Source and Intialize

  1. Unzip your chosen project somewhere
     
  2. Open a terminal in the root directory of the project. Windows: `Git Bash Here`, MacOS: `Services > New Terminal at Folder`, Linux: you got this

  3. Initialize a Git repository
     
     ```
     $ git init  
     ```

     You can see that git is not tracking anything yet by reading the output of
    
     ```
     $ git status
     ```

This will initialise a git repository. If you enable hidden files in Explorer (`View > Hidden Items`) or Finder (`CMD + Shift + .`) you will see that it has created a `.git` directory.

### Move the Existing Code

Next, we need to add the existing files to git. Before doing so it recommended to avoid adding useless files (e.g. temporary files generated by the OS), so we must  tell git what those files are:

  1. Create an empty text file in the project directory called `.gitignore`
  
  2. Go to [gitignore.io](https://gitignore.io) and add relevant tags, for example `Windows, MacOS, Linux, Python` or `LaTeX` and copy the string generate by the website into the `.gitignore` file. On MacOS / Linux you can also do this directly from the terminal
  
     ```
     $ curl https://www.toptal.com/developers/gitignore/api/latex,linux,macos,python,windows > .gitignore
     ```
     
     You can also do it by hand (without the website), the syntax is not difficult to learn.

  3. Run in the terminal

     ```
     $ git status
     ```
      
     You should see under `Untracked files:` a list of files in red that git is detecting are not part of the repository. Check that there are no useless files such as `Thumbs.db`, `.DS_Store`, `Report.aux`. You can see git tells you

     > `use "git add <file>..." to include in what will be committed`

  4. Add the existing files or directories to the staging area using

     ```
     $ git add README.md src ... # add all files
     ```

     Adding directories will recursively add all files within them.
     Or shorter if you want to **add** all files at once
     
     ```
     $ git add --all
     ```

> [!WARNING]
> Do not abuse the `--all` flag. In general you should carefully chose what files to add. By carelessly using `--all` in large projects you might accidentally add cryptographic secrets, files that are gigabytes in size, etc..

  5. Run again

     ```
     $ git status
     ```

     Now you will see the files have turned green, they are in the staging are and git says `Changes to be committed:` above them.

  6. If the list of file looks good you can create your first commit with

     ```
     $ git commit
     ```

     This will open your editor of choice (while the terminal is waiting). You will see a summary of the changes, these will not be part of the commit since if you read you will see the message
     
     ```
     # Please enter the commit message for your changes. Lines starting
     # with '#' will be ignored, and an empty message aborts the commit.
     ```

     Above these you can add your commit message. In this case there is not much to say except, for example write: `Move project into version control`.

     You can save the file and close the editor. In the terminal you should see a summary

     ```
     STUB
     [master 5c40c24] Move project into version control
       2 files changed, 36 insertions(+), 1 deletion(-)
     ```
     
## 2. Using Git Services to Collaborate

### Register and Authenticate to a Git Service

All members go to [GitHub](https://www.github.com) and register an account if they don’t have one yet. After that each user must configure their account such that they can authenticate their computer with GitHub. You will only need to perform this task once.

> [!NOTE]
> Git uses the SSH protocol which uses [public-key cryptography](https://en.wikipedia.org/wiki/Public-key_cryptography) to synchronise the repositories across computers. Git can also work with HTTPS authentication but then for security reasons GitHub requires you to use authentication tokens, which are annoying. We stick to SSH. 

If you have never used SSH or don’t have an SSH key pair you need to generate it:

  1. Run the following command **replacing the email address with yours** and follow the instructions on screen. You can press `ENTER` a few times to use the default settings.

     ```
     $ ssh-keygen -t ed25519 -C "your_email@example.com" # replace with your email
     ```

     This will generate an SSH key pair using [elliptic curve cryptography](https://andrea.corbellini.name/2015/05/17/elliptic-curve-cryptography-a-gentle-introduction/).


  2. Copy your public key. If you read the output of the previous command you will see where it was saved `Your public key has been saved in ...`. By default it will be in your home directory. To read your public key you can open the file with your editor or in the terminal run
     
     ```
     $ cat ~/.ssh/id_ed25519.pub  # or wherever it was saved
     ```

  3. Copy **your public key** which should look something like this (note: this is not my public key, but one generated for this example)

     ```
     ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIPLVAByZGT6xWM2kg7AeEkXbujOETnHdw2FOUx3/mpow np@0hm.ch
     ```

  4. On your GitHub profile in the browser go to `Settings > SSH and GPG Keys > New SSH Key` and paste your public key, leave the key type settings to an `Authentication Key`.

You will now be able to authenticate your computer with GitHub.

### Upload the Project to the Git service (Remote)

The person that has done all of the steps so far (in part 1) needs to create a remote repository on their GitHub profile.

  1. Go to [github.com/new](https://github.com/new) and create a new repository. Do not pick a template, leave it to public, and hit `Create Repository`. If you don’t know what to call repository set the name to `gitws25`.
  
     After a while you will see the repository has been created on your profile. There will be instructions on the website on how to upload your code. We will follow `... or push an existing repository from the command line`. Before following the instructions make sure that in the blue shaded area you have selected `SSH`

  2. In your terminal you can add the remote with

     ```
     $ git remote add origin git@github.com:YOUR_USERNAME/gitws25.git
     ```

     This will let Git know that there is a server named `origin` (name is local to your machine) at the GitHub URL.

  3. Now we can push our first commit to `origin` with

     ```
     $ git push --set-upstream master origin
     ```

     The `--set-upstream` flag will set `origin` to be the default remote to push to. After setting this once you will be able to write just `git push`, and it will push to `origin`.

  4. Now, if you refresh the browser you should see that your file have been uploaded to GitHub.

## 3. Collaborate with Your Team

### Cloning the project

The other members can finally do something. Hopefully they are not drunk yet.

  1. For the person that had been leading so far: Add your other team members as collaborators by going to `Settings > Collaborators > Add People` and adding their GitHub usernames.
  
  2. The other members can see on their email inbox or at [github.com/notifications](https://github.com/notifications) an invitation to join the project. Accept the invitation.
  
  3. The other members can clone the project onto their machines. Open terminal where you want your project to go. In the browser from the green `Code` button under SSH you can get the URL to clone the repository with the command:

     ```
     $ git clone git@github.com:YOUR_TEAM_MEMBER/gitws25.git # replace with your url
     ```

### Fast-forward merge

### True Merge

## 4. Collaborate with other Teams

### Forking a project

### Create a Pull-Request
